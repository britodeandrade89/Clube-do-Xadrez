<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clube de Xadrez</title>

  <!-- TailwindCSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Fonte -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Alpine.js -->
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

  <!-- Chess.js -->
  <script src="https://cdn.jsdelivr.net/npm/chess.js@0.12.0/chess.min.js"></script>

  <!-- Manifest -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1f2937">

  <style>
    body { font-family: 'Inter', sans-serif; }
    [x-cloak] { display: none !important; }
    .active-tab { background-color: #FBBF24; color: #1F2937; }
    .tab-btn { transition: background-color 0.2s, color 0.2s; }
    .chess-board {
      display: grid;
      grid-template-columns: repeat(8, 1fr);
      width: 100%;
      max-width: 600px;
      aspect-ratio: 1 / 1;
      border: 4px solid #374151;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
                  0 4px 6px -2px rgba(0, 0, 0, 0.05);
    }
    .chess-square {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: clamp(1rem, 6vw, 2.5rem);
      cursor: pointer;
      transition: background-color 0.2s;
      position: relative;
    }
    .chess-square.light { background-color: #F0D9B5; }
    .chess-square.dark { background-color: #B58863; }
    .chess-square.selected { background-color: #6b9ac4 !important; }
    .chess-square.valid-move::after {
      content: '';
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      width: 35%; height: 35%;
      background-color: rgba(4, 120, 87, 0.6);
      border-radius: 50%;
    }
    .chess-square.valid-capture::after {
      content: '';
      position: absolute;
      top: 10%; left: 10%; right: 10%; bottom: 10%;
      border: 4px solid rgba(4, 120, 87, 0.6);
      border-radius: 50%;
    }
    .chess-piece { text-shadow: 0 2px 4px rgba(0,0,0,0.2); }
    .sub-active-tab { background-color: #4A5568; color: white; }
  </style>
</head>

<body x-data="chessClub" x-init="init()" :class="{'overflow-hidden': showSplash}" class="bg-gray-800 text-gray-200">

  <!-- Splash Screen -->
  <div x-show="showSplash" x-transition.opacity class="fixed inset-0 bg-gray-900 flex flex-col items-center justify-center z-50">
    <svg class="w-20 h-20 text-white animate-spin" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
      <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
      <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.37 0 0 5.37 0 12h4zm2 5.29A8 8 0 014 12H0c0 3.04 1.13 5.82 3 7.94l3-2.65z"></path>
    </svg>
    <h1 class="text-2xl mt-4">Carregando Clube de Xadrez...</h1>
  </div>

  <!-- Main -->
  <div x-show="!showSplash" x-cloak class="min-h-screen flex flex-col bg-gray-900">
    <header class="bg-gray-800 shadow-lg sticky top-0 z-10">
      <div class="container mx-auto px-4 py-4">
        <h1 class="text-3xl font-bold text-yellow-400">Clube de Xadrez</h1>
        <nav class="flex space-x-2 bg-gray-700 rounded-lg p-1 mt-4">
          <button @click="activeTab = 'assiduidade'" :class="{'active-tab': activeTab === 'assiduidade'}" class="tab-btn flex-1 px-4 py-2 rounded-md font-semibold">Assiduidade</button>
          <button @click="activeTab = 'ranking'" :class="{'active-tab': activeTab === 'ranking'}" class="tab-btn flex-1 px-4 py-2 rounded-md font-semibold">Ranking</button>
          <button @click="activeTab = 'torneios'" :class="{'active-tab': activeTab === 'torneios'}" class="tab-btn flex-1 px-4 py-2 rounded-md font-semibold">Torneios</button>
          <button @click="activeTab = 'jogar'" :class="{'active-tab': activeTab === 'jogar'}" class="tab-btn flex-1 px-4 py-2 rounded-md font-semibold">Jogar</button>
        </nav>
      </div>
    </header>

    <main class="flex-grow container mx-auto p-4 md:p-6">
      <!-- conteúdo das abas (igual ao seu) -->
    </main>
  </div>

  <script>
  document.addEventListener('alpine:init', () => {
    Alpine.data('chessClub', () => ({
      showSplash: true,
      activeTab: 'assiduidade',
      today: new Date().toLocaleDateString('pt-BR'),

      turmas: {},
      activeTurma: null,
      rankedPlayers: [],
      tournamentPlayersInput: '',
      generatedTournament: null,
      chess: null,
      board: [],
      game: { time: { white: 300, black: 300 } },
      gameStatus: 'Jogo pronto. Brancas movem.',
      selectedSquare: null,
      validMoves: [],
      moveHistory: [],

      init() {
        console.log('App iniciado');
        setTimeout(() => { this.showSplash = false }, 1000);
        this.resetGame();
      },

      resetGame() {
        this.chess = new Chess();
        this.moveHistory = [];
        this.updateBoard();
      },

      updateBoard() {
        const board = this.chess.board();
        this.board = board;
      },

      getPieceSymbol(type, color) {
        const symbols = {
          p: '♟', r: '♜', n: '♞', b: '♝', q: '♛', k: '♚'
        };
        return color === 'w' ? symbols[type].toUpperCase() : symbols[type];
      }
    }))
  })
  </script>
</body>
</html>
